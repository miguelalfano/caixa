<!DOCTYPE html>
<html>
  <head>
    <title>Exibir dados da API</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.11.1/css/jquery.dataTables.css"
    />
    <link rel="stylesheet" href="produtos.css" />
  </head>
  <body id="body2">
    <h1 id="title">Produtos</h1>

    <table id="data">
      <thead>
        <tr>
          <th>Código de Barras</th>
          <th>Nome</th>
          <th>Quantidade</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>

    <button onclick="voltar()" id="back">Voltar</button>

    <button onclick="openModal('modalCadastrarProduto')" id="add">Adicionar produto</button>

    <div id="modalCadastrarProduto" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('modalCadastrarProduto')"
          >&times;</span
        >
        <h2>Cadastrar Usuario</h2>
        <label for="modal-código-de-barras">Código de barras:</label>
        <input type="number" min="0" oninput="validity.valid||(value='');" id="modal-código-de-barras" name="modal-código-de-barras" required />
        <br />
        <label for="modal-nome-produto">Nome do produto:</label>
        <input type="text" id="modal-nome-produto" name="modal-nome-produto" required />
        <br />
        <label for="modal-qtde-produto">Quantidade:</label>
        <input type="number" min="0" oninput="validity.valid||(value='');" id="modal-qtde-produto" name="modal-qtde-produto" required />
        <br />

        <button
          onclick="adicionarProduto(); closeModal('modalCadastrarProduto');"
          id="butmod1"
        >
          Cadastrar
        </button>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.1/js/jquery.dataTables.js"></script>   
    <script src="./../modal.js"></script>
    <script src="./../services/produto.service.js"></script>
    <script src="./produto.controller.js"></script>    

    <script>
      document.querySelector("#data_info").style.display = "none";
      window.document.onload = function (e) {
        let user = JSON.parse(localStorage.getItem("user"));

        //null 0 undefined ''
        if (!user) {
          window.location.href = "./../index.html";
        }
      };
    </script>
  </body>
</html>
